# 更新记录

日期：2025-09-23

本次更新要点：

- 新增「日志管理」后台功能：支持列表查看、尾部预览、下载、清空与删除操作，仅允许访问 storage/logs 目录下的 .log 文件。
- 后端新增控制器 Admin\LogController，包含安全的文件名校验与尾读实现，防止目录穿越与大文件读取性能问题。
- 新增视图 admin/logs.blade.php，基于 Vue + jQuery 构建日志操作界面，纯文本渲染并加入二次确认，降低 XSS 与误操作风险。
- 在后台左侧菜单添加「日志管理」入口，便于快速访问。
- 在 routes/web.php 中新增后台日志路由（GET /admin/logs，POST /admin/logs，GET /admin/logs/download）。
- 修复 IDE 提示（Intelephense）“Undefined type 'Route'”：在 routes/web.php 顶部补充 use Illuminate\Support\Facades\Route; 声明。
- 调整 admin 路由分组内日志路由的写法，去除前导斜杠以保持与项目其余路由风格一致。

安全与体验：

- 文件名严格校验（仅字母数字、点、下划线、短横线，且必须以 .log 结尾），避免目录穿越与非法访问。
- 日志内容仅支持尾读指定行数（默认 500，最大 5000），降低一次性读取超大文件的风险。
- 前端渲染采用纯文本输出，不插入 HTML，避免潜在 XSS。
- 清空与删除操作均加入二次确认提示，减少误删风险。